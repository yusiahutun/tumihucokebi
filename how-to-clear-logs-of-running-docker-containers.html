<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>How to Clear Logs of Running Docker Containers - BlinkVlog</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Long-running Docker containers can rapidly accumulate a large number of log lines. These consume storage capacity and reduce performance when accessing and filtering the data. While Docker includes integrated tools for viewing the logs, there's no built-in mechanism for cleaning them up."><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="How to Clear Logs of Running Docker Containers"><meta property="og:description" content="Long-running Docker containers can rapidly accumulate a large number of log lines. These consume storage capacity and reduce performance when accessing and filtering the data. While Docker includes integrated tools for viewing the logs, there's no built-in mechanism for cleaning them up."><meta property="og:type" content="article"><meta property="og:url" content="/how-to-clear-logs-of-running-docker-containers.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-05-02T00:00:00+00:00"><meta property="article:modified_time" content="2024-05-02T00:00:00+00:00"><meta itemprop=name content="How to Clear Logs of Running Docker Containers"><meta itemprop=description content="Long-running Docker containers can rapidly accumulate a large number of log lines. These consume storage capacity and reduce performance when accessing and filtering the data. While Docker includes integrated tools for viewing the logs, there's no built-in mechanism for cleaning them up."><meta itemprop=datePublished content="2024-05-02T00:00:00+00:00"><meta itemprop=dateModified content="2024-05-02T00:00:00+00:00"><meta itemprop=wordCount content="817"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=BlinkVlog rel=home><div class="logo__item logo__text"><div class=logo__title>BlinkVlog</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>How to Clear Logs of Running Docker Containers</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-05-02T00:00:00Z>May 02, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><img src=https://cdn.statically.io/img/static1.howtogeekimages.com/wordpress/wp-content/uploads/2022/05/Docker-New.jpeg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><h3>Quick Links</h3><ul class=table-content-level-1><li><a href=#>Understanding the Problem</a></li></ul><ul class=table-content-level-1><li><a href=#>Discovering the Log File's Path</a></li></ul><ul class=table-content-level-1><li><a href=#>Clearing the Log File</a></li></ul><ul class=table-content-level-1><li><a href=#>Limiting Log Output</a></li></ul><ul class=table-content-level-1><li><a href=#>Setting Up Log Rotation</a></li></ul><ul class=table-content-level-1><li><a href=#>Summary</a></li></ul><p>Long-running Docker containers can rapidly accumulate a large number of log lines. These consume storage capacity and reduce performance when accessing and filtering the data. While Docker includes integrated tools <a href=#>for viewing the logs</a>, there's no built-in mechanism for cleaning them up.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>In this article you'll learn how to clear up the logs of running Docker containers, without restarting or replacing them. You'll also see some techniques for more efficiently handling large logs while retaining old data.</p><h2 id=understanding-the-problem>Understanding the Problem</h2><p>Docker collects logs from the standard output and error streams of container foreground processes. The <a href=#><code>docker logs</code> command</a> is used to retrieve these logs but it doesn't let you delete old lines.</p><p>Docker supports many different logging drivers so it's not possible to offer a standardized clean-up mechanism. This article focuses on the standard <code>json-file</code> logging driver, where log lines are stored in a JSON file on your container host's filesystem. Refer to your storage driver's documentation if you need to clean up logs streamed to a remote host.</p><p>Log files created by the <a href=#><code>json-file</code> driver</a> are stored under the</p><pre><code class="hljs javascript">/<span class=hljs-keyword>var</span>/lib/docker/containers</code> </pre><p>directory. Each container gets its own log file which is used throughout its lifetime. There's no log rotation configured by default.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Simply deleting the log file isn't an effective solution. Docker expects the file to be available continually and won't recreate it automatically if it's removed. It's safer to clear the existing log's contents to avoid affecting any current writes.</p><h2 id=discovering-the-log-file-s-path>Discovering the Log File's Path</h2><p>First find the path to your target container's log file. You can retrieve the log file path for a container called <code>my-app</code> by running the following command:</p><pre>$ docker inspect --format='{{.LogPath}}' my-app  <p>/var/lib/containers/1380d936...-json.log</p></pre><h2 id=clearing-the-log-file>Clearing the Log File</h2><p>You can clear out the contents of the log without deleting it by echoing an empty string into its content. The file will be owned by <code>root</code> so you'll need to perform this operation in a root shell. The following command will empty the log file for you:</p><pre>$ sudo sh -c 'echo "" &gt; $(docker inspect --format="{{.LogPath}}" my-app)'</pre><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Shell interpolation is being used to dynamically retrieve the log file path for the <code>my-app</code> container. You could manually substitute in the path retrieved earlier instead.</p><p>When you run <code>docker logs my-app</code>, you'll now see empty output unless the container has resumed writing lines in the interim.</p><h2 id=limiting-log-output>Limiting Log Output</h2><p>The <code>docker logs</code> command accepts a few arguments that can be used to limit the output from noisy logs. These help mitigate the need to clean the log while preventing your terminal from being inundated with old lines each time you access the file.</p><ul><li><strong><code>--tail</code></strong> - This flag instructs Docker to emit only a specific number of old log lines, starting with the most recent.</li><li><strong><code>--until</code> and <code>--since</code></strong> - These flags restrict the output to log lines emitted during a specific time period. They're useful when you know the approximate timeframe in which an event occurred.</li></ul><p>Here are a few examples:</p><p><strong>Display the 100 most recent log lines</strong></p><p><code>docker logs my-app --tail 100</code></p><p><strong>Display log lines written in the past hour</strong></p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p><code>docker logs my-app --since 1h</code></p><p><strong>Display up to 100 log lines written in the past hour</strong></p><p><code>docker logs my-app --tail 100 --since 1h</code></p><h2 id=setting-up-log-rotation>Setting Up Log Rotation</h2><p>Regularly having to clean up log files in this manner usually signals that your application's logs are either excessively verbose or there's simply too much activity to store in one file.</p><p>Many Docker logging drivers, including <code>json-file</code>, have optional log rotation support that you can enable globally for the Docker daemon or on a per-container basis.</p><p>Daemon settings are configured in <code>/etc/docker/daemon.json</code>. Here's an example that rotates container logs once they reach 8MB. Up to five files will be retained at any time, with old ones automatically deleted as new rotations occur.</p><pre>{  <p> "log-opts": {</p>  <p> "max-size": "8m",</p>  <p> "max-file": "5"</p>  <p> }</p>  <p>}</p></pre><p>Restart the Docker daemon to apply the change:</p><pre>$ sudo service docker restart</pre><p>Daemon-level rotation applies to all newly created containers. Changes won't affect any containers that already exist on your host.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>Rotation can be configured for individual containers using <code>--log-opts</code> flags. These will override your default Docker daemon settings.</p><pre>docker run --name app \  <p> --log-driver json-file \</p>  <p> --log-opts max-size=8M \</p>  <p> --log-opts max-file=5 \</p>  <p> app-image:latest</p></pre><h2 id=summary>Summary</h2><p>Docker container logs can get noisy when busy applications write extensive output. Access to verbose logs is helpful for debugging but they consume storage space, make it harder to sift through data, and could reduce performance.</p><p>You can clean up log files on-demand by using shell commands to empty their content. However it's better practice to set up log rotation so this occurs automatically once files reach a specific size. The <code>docker logs</code> command also supports flags that can help tame unwieldy logs at the point of access.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7qbvWraagnZWge6S7zGibnq6fpcBwtM6wZK2nXZi5pq3RZqOon6NivKd50a6lp6GenHqlu8KknKtlk6S7ta3Ip5yrq18%3D</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./how-to-transfer-any-ebook-to-kindle-using-calibre.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>How to Transfer Any eBook to Kindle Using Calibre</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./dan-shay.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Dan &amp;amp; Shay</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./the-haunting-of-hill-house-questions-answers-theories-netflix-season-2-mike-flanagan.html>'Haunting of Hill House' Questions, Answers and Theories on Our Mind</a></li><li class=widget__item><a class=widget__link href=./message-private-account-on-instagram.html>How to Message a Private Account on Instagram</a></li><li class=widget__item><a class=widget__link href=./palmers-swivel-stick.html>Palmer's $9 Swivel Stick Eases Dry Flakes, Peeling Lips &amp;amp; Acne Scars</a></li><li class=widget__item><a class=widget__link href=./the-burks-house.html>The Burks House Laurel Mercantile</a></li><li class=widget__item><a class=widget__link href=./the-positive-impact-of-gyming-on-mental-health.html>The Positive Impact of Gyming on Mental Health: Strengthening Body and Mind</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 BlinkVlog.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>